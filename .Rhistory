geom_vline(xintercept = mean_mh_score,
linetype = "dashed") +
labs("Frequency",
y = "Scores obtained from summing mental health/depression screeners") +
theme_bw()
p = nhanes_train %>%
ggplot(aes(x = mental_score)) +
geom_histogram() +
geom_vline(xintercept = mean_mh_score,
linetype = "dashed", color = "red") +
labs("Frequency",
y = "Scores obtained from summing mental health/depression screeners") +
theme_bw()
p = nhanes_train %>%
ggplot(aes(x = mental_score)) +
geom_histogram() +
geom_vline(xintercept = mean_mh_score,
linetype = "dashed", color = red) +
labs("Frequency",
y = "Scores obtained from summing mental health/depression screeners") +
theme_bw()
p = nhanes_train %>%
ggplot(aes(x = mental_score)) +
geom_histogram() +
geom_vline(xintercept = mean_mh_score,
linetype = "dashed") +
labs("Frequency",
y = "Scores obtained from summing mental health/depression screeners") +
theme_bw()
p
p = nhanes_train %>%
ggplot(aes(x = mental_score)) +
geom_histogram() +
geom_vline(xintercept = mean_mh_score,
linetype = "dashed") +
labs("Frequency",
y = "Scores from mental health/depression screeners") +
theme_bw()
p = nhanes_train %>%
ggplot(aes(x = mental_score)) +
geom_histogram() +
geom_vline(xintercept = mean_mh_score,
linetype = "dashed") +
labs("Frequency",
y = "Scores from mental health/depression screeners") +
theme_bw()
p
p
p = nhanes_train %>%
ggplot(aes(x = mental_score)) +
geom_histogram() +
geom_vline(xintercept = mean_mh_score,
linetype = "dashed") +
labs(x = "Frequency",
y = "Scores from mental health/depression screeners") +
theme_bw()
p
p = nhanes_train %>%
ggplot(aes(x = mental_score)) +
geom_histogram() +
geom_vline(xintercept = mean_mh_score,
linetype = "dashed") +
labs(x = "Scores from mental health/depression screeners",
y = "Frequency") +
theme_bw()
p
ggsave(filename = "results/mental-health-score-histogram.png",
plot = p,
device = "png",
width = 5,
height = 3)
View(nhanes_train)
p1 = nhanes_train %>%
ggplot(aes(x = ratio_income, y = mental_score)) +
geom_point() +
#scale_y_log10() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Ratio of family income to poverty",
y = "Mental health screening score",
title = "Exploratory relationship between income and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p1
p1 = nhanes_train %>%
ggplot(aes(x = ratio_income, y = mental_score)) +
geom_point() +
scale_y_log10() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Ratio of family income to poverty",
y = "Mental health screening score",
title = "Exploratory relationship between income and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p1
p1 = nhanes_train %>%
ggplot(aes(x = ratio_income, y = mental_score)) +
geom_point() +
scale_x_log10() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Ratio of family income to poverty",
y = "Mental health screening score",
title = "Income and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p1
p1 = nhanes_train %>%
ggplot(aes(x = ratio_income, y = mental_score)) +
geom_point() +
scale_x_log10() +
scale_x_log10()+
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Ratio of family income to poverty",
y = "Mental health screening score",
title = "Income and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p1 = nhanes_train %>%
ggplot(aes(x = ratio_income, y = mental_score)) +
geom_point() +
scale_x_log10() +
scale_y_log10()+
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Ratio of family income to poverty",
y = "Mental health screening score",
title = "Income and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p1
p1 = nhanes_train %>%
ggplot(aes(x = ratio_income, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Ratio of family income to poverty",
y = "Mental health screening score",
title = "Income and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p1
ggsave(filename = "results/income-and-mental-health.png",
plot = p1,
device = "png",
width = 5,
height = 3)
p2 = nhanes_train %>%
ggplot(aes(x = age, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Age",
y = "Mental health screening score",
title = "Age and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p2
options(scipen = 0, digits = 3)  # controls number of significant digits printed
p1 = covid_train %>%
ggplot(aes(x = obesity_perc, y = case_fatality_rate)) +
geom_point() +
scale_y_log10() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Obesity percentage",
y = "Case Fatality Ratio",
title = "Obesity percentage") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p3 = nhanes_train %>%
ggplot(aes(x = female, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Gender",
y = "Mental health screening score",
title = "Gender and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p3
p3 = nhanes_train %>%
ggplot(aes(x = age_first_smoke, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Age first smoking",
y = "Mental health screening score",
title = "Age started smoking and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p3
p4 = nhanes_train %>%
ggplot(aes(x = sleep_weekday, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Hours of sleep during weekday",
y = "Mental health screening score",
title = "Hours of sleep during weekday and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p4
p5 = nhanes_train %>%
ggplot(aes(x = sleep_weekend, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Hours of sleep during weekend",
y = "Mental health screening score",
title = "Hours of sleep during weekend and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p5
sleep_raw <- read_xpt(file = "data/raw/P_SLQ.XPT"); names(sleep_raw) %<>% tolower #sleep
View(sleep_raw)
View(sleep)
View(nhanes_train)
p6 = nhanes_train %>%
ggplot(aes(x = hours_worked, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Number of hours worked last week",
y = "Mental health screening score",
title = "Number of work hours and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p6
mental_raw <- read_xpt(file = "data/raw/P_DPQ.XPT"); names(mental_raw) %<>% tolower #mental health
View(mental_raw)
mental <- mental_raw %>%
replace_with_na(replace = list(dpq010 = c(7,9),  #7 and 9 mean Refused and DK
dpq020 = c(7,9),
dpq030 = c(7,9),
dpq040 = c(7,9),
dpq050 = c(7,9),
dpq060 = c(7,9),
dpq070 = c(7,9),
dpq080 = c(7,9),
dpq090 = c(7,9),
dpq100 = c(7,9)))
View(mental)
p7 = nhanes_train %>%
ggplot(aes(x = min_sedentary, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Minutes of sedentary activity",
y = "Mental health screening score",
title = "Hours of sleep during weekend and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p7
p8 = nhanes_train %>%
ggplot(aes(x = gender, y = mental_score, fill = gender)) +
geom_boxplot() +
labs(x = "Gender",
y = "Relative spinal bone\nmineral density measurement") +
theme_bw() + theme(legend.position = "none")
p8
p8 = nhanes_train %>%
ggplot(aes(x = female, y = mental_score, fill = gender)) +
geom_boxplot() +
labs(x = "Gender",
y = "Relative spinal bone\nmineral density measurement") +
theme_bw() + theme(legend.position = "none")
p8
p8 = nhanes_train %>%
ggplot(aes(x = female, y = mental_score, fill = gender)) +
geom_boxplot() +
labs(x = "Gender",
y = "Relative spinal bone\nmineral density measurement") +
theme_bw() + theme(legend.position = "none")
p8
p8 = nhanes_train %>%
ggplot(aes(x = female, y = mental_score, fill = female)) +
geom_boxplot() +
labs(x = "Gender",
y = "Relative spinal bone\nmineral density measurement") +
theme_bw() + theme(legend.position = "none")
p8
typeof(nhanes_train$female)
head(nhanes_train)
nhanes_train = read_csv("data/clean/nhanes_train.csv",
col_types = "iififfdffifddfffffffffffffffiifffffff"))
nhanes_train = read_csv("data/clean/nhanes_train.csv",
col_types = "iififfdffifddfffffffffffffffiifffffff")
mean_mh_score = nhanes_train %>%
summarise(mean(mental_score)) %>%
pull()
mean_mh_score
median_mh_score = nhanes_train %>%
summarise(median(mental_score)) %>%
pull()
median_mh_score
p = nhanes_train %>%
ggplot(aes(x = mental_score)) +
geom_histogram() +
geom_vline(xintercept = mean_mh_score,
linetype = "dashed") +
labs(x = "Mental health screening scores",
y = "Frequency") +
theme_bw()
p
p1 = nhanes_train %>%
ggplot(aes(x = ratio_income, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Ratio of family income to poverty",
y = "Mental health screening score",
title = "Income and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p1
head(nhanes_train)
View(occupation_raw)
physical_raw <- read_xpt(file = "data/raw/P_PAQ.XPT"); names(physical_raw) %<>% tolower #physical activity
View(physical_raw)
p2 = nhanes_train %>%
ggplot(aes(x = age, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Age",
y = "Mental health screening score",
title = "Age and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p2
p3 = nhanes_train %>%
ggplot(aes(x = age_first_smoke, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Age first smoking",
y = "Mental health screening score",
title = "Age started smoking and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p3
p4 = nhanes_train %>%
ggplot(aes(x = sleep_weekday, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Hours of sleep during weekday",
y = "Mental health screening score",
title = "Hours of sleep during weekday and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p4
p5 = nhanes_train %>%
ggplot(aes(x = sleep_weekend, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Hours of sleep during weekend",
y = "Mental health screening score",
title = "Hours of sleep during weekend and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p5
p6 = nhanes_train %>%
ggplot(aes(x = hours_worked, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Number of hours worked last week",
y = "Mental health screening score",
title = "Number of work hours and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p6
p7 = nhanes_train %>%
ggplot(aes(x = min_sedentary, y = mental_score)) +
geom_point() +
geom_smooth(method = "lm", formula = "y~x", se = FALSE) +
labs(x = "Minutes of sedentary activity",
y = "Mental health screening score",
title = "Hours of sleep during weekend and mental health risk") +
theme_bw() +
theme(plot.title = element_text(hjust = 0.5))
p7
p8 = nhanes_train %>%
ggplot(aes(x = female, y = mental_score, fill = female)) +
geom_boxplot() +
labs(x = "Gender",
y = "Relative spinal bone\nmineral density measurement") +
theme_bw() + theme(legend.position = "none")
p8
ggsave(filename = "results/gender-and-mental-health.png",
plot = p8,
device = "png",
width = 5,
height = 3)
p9 = nhanes_train %>%
ggplot(aes(x = nonhisp_white, y = mental_score, fill = nonhisp_white)) +
geom_boxplot() +
labs(x = "Race/ethnicity",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p9
p8
p9
p8
p10= nhanes_train %>%
ggplot(aes(x = never_married, y = mental_score, fill = never_married)) +
geom_boxplot() +
labs(x = "Marriage status",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p10
typeof(nhanes_train$never_married)
summary(nhanes_train)
head(nhanes_train)
p11= nhanes_train %>%
ggplot(aes(x = born_us, y = mental_score, fill = born_us)) +
geom_boxplot() +
labs(x = "Born in the US",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p11
View(demo_raw)
p12= nhanes_train %>%
ggplot(aes(x = edu_college, y = mental_score, fill = edu_college)) +
geom_boxplot() +
labs(x = "Some college or higher",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p12
p13= nhanes_train %>%
ggplot(aes(x = now_smoke, y = mental_score, fill = now_smoke)) +
geom_boxplot() +
labs(x = "Smoking status",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p13
p14= nhanes_train %>%
ggplot(aes(x = dr_sleep, y = mental_score, fill = dr_sleep)) +
geom_boxplot() +
labs(x = "Told doctor about trouble sleeping",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p14
p15= nhanes_train %>%
ggplot(aes(x = told_asthma, y = mental_score, fill = told_asthma)) +
geom_boxplot() +
labs(x = "Told by a doctor to have asthma",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p15
p16= nhanes_train %>%
ggplot(aes(x = told_arthritis, y = mental_score, fill = told_arthritis)) +
geom_boxplot() +
labs(x = "Told by a doctor to have arthritis",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p16
p17= nhanes_train %>%
ggplot(aes(x = told_coronary, y = mental_score, fill = told_coronary)) +
geom_boxplot() +
labs(x = "Told by a doctor to have coronary heart disease",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p17
p18 = nhanes_train %>%
ggplot(aes(x = told_attack, y = mental_score, fill = told_attack)) +
geom_boxplot() +
labs(x = "Told by a doctor to have heart attack",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p18
p19 = nhanes_train %>%
ggplot(aes(x = told_stroke, y = mental_score, fill = told_stroke)) +
geom_boxplot() +
labs(x = "Told by a doctor to have heart attack",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p19
p20 = nhanes_train %>%
ggplot(aes(x = told_thyroid, y = mental_score, fill = told_thyroid)) +
geom_boxplot() +
labs(x = "Told by a doctor to have thyroid problem",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p20
p21 = nhanes_train %>%
ggplot(aes(x = told_cancer, y = mental_score, fill = told_cancer)) +
geom_boxplot() +
labs(x = "Told by a doctor to have cancer",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p21
p22 = nhanes_train %>%
ggplot(aes(x = told_weight, y = mental_score, fill = told_cancer)) +
geom_boxplot() +
labs(x = "Told by a doctor to lose weight",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p22
p22 = nhanes_train %>%
ggplot(aes(x = told_weight, y = mental_score, fill = told_weight)) +
geom_boxplot() +
labs(x = "Told by a doctor to lose weight",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p22
p23 = nhanes_train %>%
ggplot(aes(x = told_exe, y = mental_score, fill = told_exe)) +
geom_boxplot() +
labs(x = "Told by a doctor to exercise",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p23
p24 = nhanes_train %>%
ggplot(aes(x = told_salt, y = mental_score, fill = told_salt)) +
geom_boxplot() +
labs(x = "Told by a doctor to exercise",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p24
p25 = nhanes_train %>%
ggplot(aes(x = told_fat, y = mental_score, fill = told_fat)) +
geom_boxplot() +
labs(x = "Told by a doctor to exercise",
y = "Mental health screening score") +
theme_bw() + theme(legend.position = "none")
p25
